<!DOCTYPE html>
<html lang="en">

<head>
  <title>TympClass Classifier</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link href="https://fonts.googleapis.com/css?family=Work+Sans:100,200,300,400,700,800" rel="stylesheet">

  <link rel="stylesheet" href="{{ url_for('static', filename='css/open-iconic-bootstrap.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/animate.css') }}">

  <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.carousel.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.theme.default.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/magnific-popup.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/aos.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/ionicons.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-datepicker.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery.timepicker.css">  ') }}  
    <link rel=" stylesheet" href="{{ url_for('static', filename='css/flaticon.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/icomoon.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='basic.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='dropzone.min.css') }}">


</head>
<style>
  /* DIV table style */

  .div-table {
    display: table;
    width: 100%;
    background-color: #fff;
  }

  .div-tr {
    display: table-row;
  }

  .div-th,
  .div-td {
    display: table-cell;
    padding: 8px 15px;
    border-bottom: 1px solid #eaeff0;
    vertical-align: middle;
  }

  .div-thead {
    display: table-header-group;
    font-weight: bold;
  }

  .div-tfoot {
    display: table-footer-group;
    font-weight: bold;
    background-color: #fff;
  }

  .div-tbody {
    display: table-row-group;
  }
</style>


<body>

  <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
    <div class="container">
      <a class="navbar-brand" href="/">TympClass.</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav"
        aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="oi oi-menu"></span> Menu
      </button>

      <div class="collapse navbar-collapse" id="ftco-nav">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item active"><a href="/" class="nav-link">Home</a></li>
          <li class="nav-item"><a href="/" class="nav-link">About</a></li>
          <li class="nav-item"><a href="/" class="nav-link">Services</a></li>

          <li class="nav-item"><a href="/" class="nav-link">Case Studies</a></li>
          <li class="nav-item cta"><a href="/" class="nav-link"><span>Try it out!</span></a></li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- END nav -->

  <!-- <div class="js-fullheight"> -->
  <div class="hero-wrap js-fullheight">
    <div class="overlay"></div>
    <div id="particles-js"></div>
    <br>
    <div class="container">
      <div class="row no-gutters slider-text align-items-center justify-content-center" data-scrollax-parent="true">
        <div class="col-md-6 ftco-animate text-center" data-scrollax=" properties: { translateY: '20%' }">
          <h1 class="mb-4" data-scrollax="properties: { translateY: '10%', opacity: 1.6 }">Use the 
            <strong>dropzone</strong> to try our model</h1>

          <form action="/upload/" class="dropzone" id="uploadzone" style="color:#8b8b92">
            <DIV class="dz-message needsclick">
              Drop images here or click to upload.<BR>
              <SPAN class="note needsclick">(The results for each uploaded image will be shown in the table
                <strong>below</strong>)</SPAN>
            </DIV>
          </form>


          <div id="preview-template" style="display: none;">
            <div class="div-tr">
              <div class="div-td">
                <div class="dz-filename"><span data-dz-name></span></div>
                <div class="dz-size" data-dz-size></div>


              </div>
              <div class="div-td">
                <div class="dz-preview dz-file-preview">
                  <img data-dz-thumbnail />

                  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>
                  <div class="dz-success-mark"><span>✔</span></div>
                  <div class="dz-error-mark"><span>✘</span></div>
                  <div class="dz-error-message"><span data-dz-errormessage></span></div>
                </div>
              </div>
              <div class="div-td"><span class="pred-label" data-dz-label></span> </div>
              <div class="div-td"><span class="pred-prob" data-dz-prob></span></div>

              <div class="div-td"><span class="pred-multi-label" data-dz-label></span> </div>
              <div class="div-td"><span class="pred-multi-prob" data-dz-prob></span></div>
              <div class="div-td">
                <span data-dz-remove><a href="#"><i class="icon-times" alt="Click me to remove the file."></i> Remove
                    Image</a></span>
              </div>
            </div>

          </div>

          <br>

          <div id="dropzone-preview" class="dropzone-previews dropzone div-table" style="color:#8b8b92">
            <div class="div-tr">
              <div class="div-th">Image Info</div>
              <div class="div-th">Image Preview</div>
              <div class="div-th">Classification Label</div>
              <div class="div-th">Class probabilities <br> (Normal, Abnormal)</div>
              <div class="div-th">Multi Classification Label</div>
              <div class="div-th">Multi Class probabilities <br> (Normal, AOM, CSOM, Earwax, OE)</div>
              <div class="div-th"></div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>



  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
      <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
      <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
        stroke="#F96D00" /></svg></div>



  <script src="{{ url_for('static', filename='js/jquery.min.js')}}"></script>
  <script src="{{ url_for('static', filename='js/jquery-migrate-3.0.1.min.js')}}"></script>
  <script src="{{ url_for('static', filename='js/popper.min.js')}}"></script>
  <script src="{{ url_for('static', filename='js/bootstrap.min.js')}}"></script>
  <script src="{{ url_for('static', filename='js/jquery.easing.1.3.js')}}"></script>
  <script src="{{ url_for('static', filename='js/jquery.waypoints.min.js')}}"></script>
  <script src="{{ url_for('static', filename='js/jquery.stellar.min.js')}}"></script>
  <script src="{{ url_for('static', filename='js/owl.carousel.min.js')}}"></script>
  <script src="{{ url_for('static', filename='js/jquery.magnific-popup.min.js')}}"></script>
  <script src="{{ url_for('static', filename='js/aos.js')}}"></script>
  <script src="{{ url_for('static', filename='js/jquery.animateNumber.min.js')}}"></script>
  <script src="{{ url_for('static', filename='js/bootstrap-datepicker.js')}}"></script>
  <script src="{{ url_for('static', filename='js/jquery.timepicker.min.js')}}"></script>
  <script src="{{ url_for('static', filename='js/particles.min.js')}}"></script>
  <script src="{{ url_for('static', filename='js/particle.js')}}"></script>
  <script src="{{ url_for('static', filename='js/scrollax.min.js')}}"></script>
  <script
    src="{{ url_for('static', filename='https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false')}}"></script>
  <script src="{{ url_for('static', filename='js/google-map.js')}}"></script>
  <script src="{{ url_for('static', filename='js/main.js')}}"></script>
  <script src="{{ url_for('static', filename='dropzone.min.js')}}"></script>
  <script>

    Dropzone.autoDiscover = false;

    $(document).ready(() => {
      $('#uploadzone').dropzone({
        previewsContainer: "#dropzone-preview",
        previewTemplate: document.getElementById('preview-template').innerHTML,
        acceptedFiles: 'image/*',
        success: function (file, response) {
          response = JSON.parse(response);
          $(file.previewTemplate).find('.pred-label').append(document.createTextNode(response.label));
          $(file.previewTemplate).find('.pred-multi-label').append(document.createTextNode(response.label_multi));

          response.probs = response.probs[0].map(function (prob) {
            return prob.toFixed(3)
          });

          response.probs_multi = response.probs_multi[0].map(function (prob) {
            return prob.toFixed(3)
          });

          $(file.previewTemplate).find('.pred-prob').append(document.createTextNode(response.probs));
          $(file.previewTemplate).find('.pred-multi-prob').append(document.createTextNode(response.probs_multi));
          $(file.previewTemplate).find('.dz-progress').fadeOut();
        },
        url: '/upload/'
      });
    });
  </script>


</body>

</html>